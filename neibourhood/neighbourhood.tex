\documentclass{beamer}

\usepackage[T2A]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[english,russian]{babel}
\usepackage{amssymb,amsfonts,amsmath,mathtext}
\usepackage{cite,enumerate,float,indentfirst}

\usepackage{diagrams}
\usepackage{extpfeil} % double-arrows

\graphicspath{{images/}}

\usetheme{Pittsburgh}
\usecolortheme{whale}

\setbeamertemplate{footline}{\scriptsize{\hspace*{0.4cm}\insertframenumber}\vspace*{0.3cm}}
\beamertemplatenavigationsymbolsempty

\errorcontextlines 10000

\begin{document}
\title{\Large{Окрестностная грамматика}}
\author{Константин Соколов}
\institute[]
{Mathlingvo, СПбГУ, i-Free\\ \bigskip  \url{http://nlu-rg.ru}}
\date{Санкт-Петербург, 2014} 
% Создание заглавной страницы
\begin{frame}
    \thispagestyle{empty}
    \titlepage
\end{frame}

\begin{frame}{План}
\setcounter{framenumber}{1}
    \begin{itemize}
		\item окрестностные грамматики
		\item синтаксические диаграммы
		\item теоретико-категорная трактовка композициональности
    \end{itemize}
\end{frame}


% 1. Окрестностные грамматики

\begin{frame}{}
\begin{center}
	\textbf{Окрестностные грамматики}
\end{center}
\end{frame}

\begin{frame}{Окрестностные грамматики (1)}
Шрейдер Ю. А. Топологические модели языка. 1972.\\
\medskip
\begin{small}
\begin{itemize}
	\item Пусть $A$ -- алфавит. Окрестность -- это цепочка над алфавитом $A \cup \{ \# \}$ с отмеченным вхождением некоторого знака из $A$ (центр окрестности)
		\begin{itemize}
			\item $a\underline{a}b$, $\underline{a}b\#$, $\#\underline{b}\#$
			\item в цепочке $X = abaac$ элемент $b$ имеет окрестности $U_1 = a\underline{b}$, $U_2 = a\underline{b}aa$, $U_3 = \#a\underline{b}a$ и т.д.
		\end{itemize}
\end{itemize}
\end{small}
\end{frame}

\begin{frame}{Окрестностные грамматики (2)}
\begin{small}
\begin{itemize}
	\item Пусть $M$ -- множество окрестностей над $A \cup \{ \# \}$. Цепочка $X$ \textit{непрерывна} относительно $M$, если любое вхождение в $X$ любого знака из $A$ имеет окрестность из $M$.
	\item Множество цепочек, непрерывных относительно $M$, называется \textit{простым окрестностным $M$-языком}
		\begin{itemize}
			\item система $U_1 = a\underline{a}$, $U_2 = \#\underline{a}$, $U_3 = a\underline{b}$ задаёт язык \texttt{a+b}
			\item система $U_1 = \underline{a}$, $U_2 = \underline{b}$ задаёт язык \texttt{(a|b)+}
		\end{itemize}
	\item $M$-языки являются автоматными языками (Борщев В. Б., 1967)
\end{itemize}
\end{small}
\end{frame}

\begin{frame}{Окрестностные грамматики (3)}
\end{frame}

\begin{frame}{Окрестностные грамматики (4)}
\end{frame}


% 2. Синтаксические диаграммы

\begin{frame}{}
\begin{center}
	\textbf{Синтаксические диаграммы}
\end{center}
\end{frame}

% Синтаграммы 
%   - с отношением непосредственного предшествования
%   - сотношением неп. предш. и порождения (контекстно-своб.)
\begin{frame}{Синтаксические диаграммы (1)}
Лапшин В. А. Лекции по математической лингвистике, 2010\\
\medskip
\begin{small}
\begin{itemize}
	\item \textit{текст} -- ``нелинейная'' последовательность символов
	\item \textit{окрестностная грамматика} -- система ограничений, определяющая множество \textit{корректных текстов}
	\item \textit{язык} -- множество текстов, задаваемых окрестностной грамматикой
\end{itemize}
\end{small}
\end{frame}

\begin{frame}{Синтаксические диаграммы (2)}
Простой окрестностный язык \texttt{(ab)+a}\\
\medskip
\begin{small}
\begin{itemize}
	\item алфавит $A = \{a, b\}$
	\item отношение непосредственного предшествования $\leftarrow \; \subseteq A \times A$
	\item $U(a) = \{\underline{a} \leftarrow b, b \leftarrow \underline{a}, b \leftarrow \underline{a} \leftarrow b\}$, $U(b) = \{ a \leftarrow \underline{b} \leftarrow a \}$
\end{itemize}
\end{small}
\end{frame}

\begin{frame}{Синтаксические диаграммы (3)}
Контекстно-свободный язык:\\
\medskip
\begin{small}
\begin{itemize}
	\item КС-грамматика $G = \langle V, \Sigma, R, s \rangle$, где $V$ -- нетерминалы, $\Sigma$ -- терминалы, $R$ -- правила, $s \in V$ -- начальный символ
	\item диаграммы над алфавитом $A = V \cup \Sigma$ 
	\item множество отношений $S = \{ S_L, S_P \}$, где  
		\begin{itemize}
			\item $S_L$ -- отношение непосредственного предшествования, 
			\item $S_P$ -- отношение ``быть непосредственным потомком''
		\end{itemize}
\end{itemize}
\end{small}
\end{frame}

\begin{frame}{Синтаксические диаграммы (3)}
Контекстно-свободный язык:\\
\medskip
\begin{small}
\begin{itemize}
	\item окрестностная грамматика 
		\begin{itemize}	
			\item $U(a) = \{ \underline{a} \}$, $a \in \Sigma$
			\item $U(A)$ для каждого $A \in V$, стоящего слева в правиле вида $A \to X_1, X_2, \dots X_n$:
\begin{diagram}[labelstyle=\scriptstyle]
 & & \underline{A} & & & & \\
 & \ldTo^{S_P} & \dTo_{S_P} & \rdTo{S_P}(4,2) & & & \\
X_1 & \lDashto^{S_L} & X_2 & \lDashto^{S_L} & \dots & \lDashto^{S_L} & X_n \\
\end{diagram}
		\end{itemize}
\end{itemize}
\end{small}
\end{frame}


% Синтаграммы - форм. определение
\begin{frame}{Синтаксические диаграммы (2)}
\begin{small}
\begin{itemize}
	\item алфавит $A = \{ a_1, a_2, \dots, a_n \}$
	\item размеченный мультиграф $\Gamma = \{ V, R, S, f \}$, где 
		\begin{itemize}
			\item $V$ -- вершины
			\item $R$ -- ребра, т.е. пары $(u, v)$, где $u, v \in V$, $u \neq v$
			\item $S$ -- пометки на ребрах (сорта)
			\item $f : R \to S$ приписывает ребрам пометки
		\end{itemize}
	\item $F : V \to A$ сопоставляет каждой вершине графа $\Gamma$ символ алфавита $A$
\end{itemize}
\end{small}
\medskip
Тройка $D = \langle A, \Gamma, F \rangle$ называется \textit{синтаксической диаграммой}
\end{frame}

% Синтаграммы - включение синтаграммы
\begin{frame}{Синтаксические диаграммы (3)}
Даны две диаграммы $D_1 = \langle A, \Gamma_1, F_1 \rangle$, $D_2 = \langle A, \Gamma_2, F_2 \rangle$ над алфавитом $A$\\
\medskip
\begin{itemize}
	\item[] Тройка отображений $s = (s_V, s_R, s_S)$, где 
		\begin{itemize}
			\item $s_V : V_1 \to V_2$
			\item $s_R : R_1 \to R_2$
			\item $s_S : S_1 \to S_2$,
		\end{itemize}
	\item[] удовлетворяющих условиям
		\begin{itemize}
			\item $F_1(v) = F_2(s_V(v))$ для всех $v \in V_1$
			\item $s_S(f_1(u, v)) = f_2(s_R(u, v))$ для всех $(u, v) \in R_1$
			\item $s_R(u, v) = (s_V(u), s_V(u)) \in R_2$ для всех $(u, v) \in R_1$,
		\end{itemize}
	\item[] определяет включение диаграммы $D_1$ в диаграмму $D_2$ в качестве поддиаграммы.
\end{itemize}
\end{frame}

% Окрестность для синтаграмм
\begin{frame}{Синтаксические диаграммы (4)}
\textit{Окрестность} $D_a$ символа $a \in A$ -- пара  $(D_a, s_a)$, где $D_a$ -- синтаксическая диаграмма, а $s_a : a \to D_a$ -- включение диаграммы $a$, состоящей из одной вершины, помеченной символом $a$, в $D_a$.\\
\bigskip
\textit{Окрестностная грамматика} на множестве синтаксических диаграмм $\mathbf{D}$ -- это семейство окрестностей $G = \{ G_a \; \vert \; a \in A, G_a \in \mathbf{D} \}$
\end{frame}

% Синтаксическое покрытие диаграммы, корректная синт. диаграмма
\begin{frame}{Синтаксические диаграммы (6)}
\begin{figure}[H]
\includegraphics[scale=0.46]{star.png} 
\end{figure}
\end{frame}

\begin{frame}{Синтаксические диаграммы (6)}
\begin{itemize}
	\item Пусть $\mathbf{D}$ -- множество синтаксических диаграмм, $G = \{ G_a \; \vert \; a \in A \}$ -- окрестностная грамматика на $\mathbf{D}$ и $D \in \mathbf{D}$ -- некоторая диаграмма
	\item Семейство окрестностей $G_D = \{ D_v \; \vert \; v \in V, D_v \in G_{F(v)} \}$ называется синтаксическим покрытием диаграммы $D$, если
		\begin{itemize}
			\item $D_v$ -- поддиаграмма $D$ для всех вершин $v$ диаграммы $D$
			\item $s^v_R(z(D_v)(v)) = z(D)(v)$, где $z(D)(v)$ -- звезда диаграммы $D$ в вершине $v$
		\end{itemize}
\end{itemize}
\end{frame}


\begin{frame}{Синтаксические диаграммы (6)}
Замечания:\\
\medskip
\begin{small}
\begin{itemize}
	\item Окрестностная грамматика для КС-языков похожа на Tree Adjoining Grammar.
	\item Советские разработки (Шрейдер, Борщев, Хомяков) опередили работы по TAG примерно на 20 лет, но не получили известности.
	\item Линейно-индексируемые грамматики, вершинные грамматики, CCG и TAG слабо эквивалентны (Vijay-Shanker, Weir. 1994). Аналогичные результаты по окрестностным грамматикам мне неизвестны.
\end{itemize}
\end{small}
\end{frame}


% 3. Теоретико-категорная формализация принципа композициональности

% Хорошо про топологию Гротендика - http://anhinga-anhinga.livejournal.com/59865.html
% Идея, что стрелки выражают не только функции, но и аппроксимацию - зачётная (думай про решето)

\begin{frame}{}
\begin{center}
	\textbf{Теоретико-категорная трактовка композициональности}
\end{center}
\end{frame}

\begin{frame}{Пучки (1)}
Три варианта определения пучков:\\
\medskip
\begin{small}
\begin{itemize}
	\item топологическое пространство $(X, \mathcal{O})$ и сечения $\mathcal{F}(U)$, $U \in \mathcal{O}(X)$
	\item пучок непрерывных сечений накрытия $(\widetilde{\mathcal{F}}, p)$
	\item контравариантный функтор $\mathcal{F} : \mathcal{C}^{op} \to Sets$
\end{itemize}
\end{small}
\medskip
\dots и соответствующие условия
\end{frame}

\begin{frame}{Пучки (2)}
Категорное определение позволяет обобщить конструкцию:\\
\medskip
\begin{small}
\begin{itemize}
	\item базовое пространство заменяется категорией
	\item понятие окрестности заменяется понятием \textit{решета}
	\item топологическая структура заменяется \textit{топологией Гротендика}
	\item топологическое пространство заменяется \textit{сайтом}
\end{itemize}
\end{small}
\end{frame}

% Уточнить - это стрелки в С или в C^{op}?
\begin{frame}{Пучки (3)}
Решето -- это\\
\medskip
\begin{small}
\begin{itemize}
	\item (уточнить): $\{ V_{ij} \to U_i \; \vert \; U_i, V_{ij} \in \mathcal{O}(X), U_i \subseteq V_{ij} \}$
	\item 
\end{itemize}
\end{small}
\end{frame}

\begin{frame}{Пучки (4)}
Топология Гротендика $J$ сопоставляет каждому объекту $A \in Ob(\mathcal{C})$ множество решет $J(A)$ таких, что:\\
\medskip
\begin{small}
\begin{itemize}
	\item максимальное решето $h_A = \{ f \; \vert \; Cod(f) = A \}$ принадлежит $J(A)$
	\item если $S \in J(A)$ и $h : B \to A$ - произвольный морфизм c концом в $A$, то решето $h^*(S) = \{ f \; \vert \; Cod(f) = B, h \circ f \in S \} \in J(B)$
	\item если $S \in J(A)$ и $R$ -- решето на $A$ такое, что $h^*(R) \in J(B)$ для всех $h : B \to A$, то $R \in J(A)$
\end{itemize}
\end{small}
\end{frame}

\begin{frame}{Пучки (5)}
Сайт -- это\\
\medskip
\begin{small}
\begin{itemize}
	\item категория $\mathcal{C}$, снабженная топологией Гротендика
	\item 
\end{itemize}
\end{small}
\end{frame}

\begin{frame}{Пучки (6)}
Отступление про уравнители:\\
\medskip
\begin{small}
\begin{itemize}
	\item Пусть $X, Y$ - множества и $f, g : X \to Y$, \\уравнитель $Eq(f,g) = \{ x \in X \; \vert \; f(x) = g(x) \}$
	\medskip
	\item Пусть $F$ - множество отображений $f_i : X \to Y$, \\уравнитель $Eq(F) = \{ x \in X \; \vert \; \forall f, g \in F, f(x) = g(x) \}$
\end{itemize}
\end{small}
\end{frame}

\begin{frame}{Пучки (7)}
Пусть $X, Y \in Ob(C)$ и $f, g \in Hom(X, Y)$.\\
\medskip
\begin{diagram}[labelstyle=\scriptstyle]
 E & \rTo^{eq} & X & \pile{\rTo^f\\ \rTo_g} & Y \\
 \uDashto^u & \ruTo^h & & & & \\
 O & & & & & \\
 \end{diagram}

\begin{small}
\begin{itemize}
	\item $f \circ eq = g \circ eq$
	\item для любого объекта $O \in Ob(C)$ и стрелки $h : O \to X$, $h \circ f = h \circ g$ существует и единственна стрелка $u : O \to E$,  $eq \circ u = h$
\end{itemize}
\end{small}
\end{frame}


\begin{frame}{Пучки (8)}
Пусть дан сайт $(C, J)$. Предпучок $\mathcal{F} : C^{op} \to Sets$ называется \textit{пучком}, если для каждого объекта $A \in Ob(C)$ и каждого решета $S \in J(A)$, коммутативна диаграмма\\

% $F(X) \rightarrow \prod \limits_{\alpha\in A} F(X_\alpha) {{{} \atop \longrightarrow}\atop{\longrightarrow \atop{}}} \prod \limits_{\alpha,\beta \in A} F(X_\alpha\times_X X_\beta)$

\begin{diagram}[labelstyle=\scriptstyle,loose,height=.8em,width=2pt]
\mathcal{F}(A) & \rTo^{eq} & \prod \limits_{f \in S} \mathcal{F}(Dom(f)) & \pile{\rTo^p\\ \rTo_q} & \prod \limits_{f,g \in S} \mathcal{F}(Dom(g)) \\
\end{diagram}

где $Dom(f) = Cod(g)$, а $eq$ - уравнитель.
\end{frame}



% Категории синтаксических диаграмм - D_G, Ext(D_G)
\begin{frame}{Принцип композициональности (1)}
\end{frame}

% Топология Гротендика на категории Ext(D_G)
\begin{frame}{Принцип композициональности (2)}
\end{frame}

% предпучок \mathcal{F} : Ext(D_G) \to Sets как семантическая интерпретация
\begin{frame}{Принцип композициональности (3)}
\end{frame}

% Пучок в топологии Гротендика на Ext(D_G)
\begin{frame}{Принцип композициональности (4)}
\end{frame}

% Аксиомы пучка как формализация принципа композициональности
\begin{frame}{Принцип композициональности (5)}
\end{frame}


\begin{frame}{ТК}

\def\Assl{{\rm assl}}\def\Id{{\rm id}}

\begin{diagram}
A*(B*(C*D))			& \rTo^\Assl 	& 	(A*B)*(C*D) 	& \rTo^\Assl 	& ((A*B)*C)*D\\
\dTo^{\Id*\Assl} 	&				&	=				&				& \uTo_{\Assl*\Id}\\
A*((B*C)*D)			&				& \rTo^\Assl 		&				& (A*(B*C))*D\\
\end{diagram}

\end{frame}


\begin{frame}{Manin}

\begin{diagram}[labelstyle=\scriptstyle]
F(X) & \rTo^{f(X)} & G(X) \\
\dTo^{F(\phi)} & & \dTo_{G(\phi)} \\
F(Y) & \rTo_{f(Y)} & G(Y) \\
\end{diagram}

\end{frame}

\begin{frame}{pullback example}
\begin{diagram}[labelstyle=\scriptstyle]
U	&	&	&	&	\\
	& \rdTo~{(x,y)}\rdTo(4,2)^x\rdTo(2,4)_y &	&	&	\\
	&	& X\times_Z Y & \rTo_p &	X	\\
	&	&	\dTo^q	&	& \dTo_f \\
	&	&	Y	& \rTo^g &	Z	\\
\end{diagram}
\end{frame}



\begin{frame}{}
    \thispagestyle{empty}
    \begin{center}
        {\large Спасибо!}
    \end{center}
\end{frame}


%%% слайд помещается сюда
%% \begin{frame}{Заголовок}
%% \end{frame}

\end{document}
